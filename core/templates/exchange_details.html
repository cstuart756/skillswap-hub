{% extends "base.html" %}
{% block title %}Exchange Details | SkillSwap Hub{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-md-8 col-lg-6">
    <h1 class="h3 mb-3">Exchange Personal Details</h1>
    <p class="mb-4 text-muted">Share your contact information securely with your SkillSwap partner. Only share details you are comfortable exchanging.</p>
    {% if not_allowed %}
      <div class="alert alert-warning">You must request a SkillSwap before you can view or submit exchange details.</div>
    {% else %}
      {% if success %}
        <div class="alert alert-success">Your details have been submitted and will be shared with your SkillSwap partner.</div>
      {% endif %}
      <form method="post">
        {% csrf_token %}
        <div class="mb-3">
          <label class="form-label" for="full_name">Full Name</label>
          <input type="text" class="form-control" id="full_name" name="full_name" required>
        </div>
        <div class="mb-3">
          <label class="form-label" for="email">Email Address</label>
          <input type="email" class="form-control" id="email" name="email" required>
        </div>
        <div class="mb-3">
          <label class="form-label" for="phone">Phone Number (optional)</label>
          <input type="tel" class="form-control" id="phone" name="phone">
        </div>
        <div class="mb-3">
          <label class="form-label" for="notes">Additional Notes (optional)</label>
          <textarea class="form-control" id="notes" name="notes" rows="3" placeholder="e.g. Best time to contact, preferred method, etc."></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Share Details</button>
      </form>

      {% if user_details and user_details.exists %}
        <hr>
        <h2 class="h5 mt-4">Your Exchange Details</h2>
        <ul class="list-group mb-3">
          {% for detail in user_details %}
            <li class="list-group-item">
              <strong>{{ detail.full_name }}</strong> &lt;{{ detail.email }}&gt;<br>
              {% if detail.phone %}Phone: {{ detail.phone }}<br>{% endif %}
              {% if detail.notes %}Notes: {{ detail.notes }}<br>{% endif %}
              <span class="text-muted small">Submitted: {{ detail.created_at|date:"j M Y, H:i" }}</span>
            </li>
          {% empty %}
            <li class="list-group-item">No details submitted yet.</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endif %}
    <div class="alert alert-info mt-4" role="alert">
      <strong>Privacy tip:</strong> Only share information you are comfortable with. SkillSwap Hub does not store or display your details publicly.
    </div>
  </div>
</div>
{% endblock %}
